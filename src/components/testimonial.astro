---
import type { ImageMetadata } from 'astro';
import { Image } from 'astro:assets';

interface Props {
	name: string;
	image: string;	
	title: string;
}

const { name, image, title } = Astro.props;

const avatars = import.meta.glob<{ default: ImageMetadata }>('../assets/testimonials/*.jpg');
const avatar = avatars[`../assets/testimonials/${image}.jpg`];
if (!avatar) {
	throw new Error(`Could not resolve testimonial avatar for ${image}`);
}
const src = (await avatar()).default;
---

<figure class="lux-card flex h-full flex-col justify-between p-6">
	<blockquote class="text-base text-slate-200">
		<slot />
	</blockquote>
	<figcaption class="mt-6 flex items-center gap-4">
		<Image class="h-12 w-12 rounded-full" height="96" width="96" {src} alt="" />
		<div>
			<p class="text-base font-semibold text-white">{name}</p>
			<p class="text-sm text-neutral-300">{title}</p>
		</div>
	</figcaption>
</figure>
