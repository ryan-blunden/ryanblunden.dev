---
import type { ImageMetadata } from 'astro';
import { Image } from 'astro:assets';

interface Props {
	name: string;
	image: string;	
	title: string;
}

const { name, image, title } = Astro.props;

const avatars = import.meta.glob<{ default: ImageMetadata }>('../assets/testimonials/*.jpg');
const avatar = avatars[`../assets/testimonials/${image}.jpg`];
if (!avatar) {
	throw new Error(`Could not resolve testimonial avatar for ${image}`);
}
const src = (await avatar()).default;
---

<figure class="flex h-full flex-col justify-between rounded-lg border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-700 dark:bg-gray-800">
	<blockquote class="text-base text-gray-700 dark:text-gray-300">
		<slot />
	</blockquote>
	<figcaption class="mt-6 flex items-center gap-4">
		<Image class="h-12 w-12 rounded-full" height="96" width="96" {src} alt="" />
		<div>
			<p class="text-base font-semibold text-gray-900 dark:text-white">{name}</p>
			<p class="text-sm text-primary-600 dark:text-primary-400">{title}</p>
		</div>
	</figcaption>
</figure>
